{% extends 'core/base.html' %}
{% block title %}
Group
{% endblock title %}
{% load i18n %}{% load static %}
{% csrf_token %}

{% block content %}

<script src="{% static 'js/group.js' %}" defer></script>
<script src="{% static 'axios/dist/axios.js' %}"></script>
<script>
    const joinGroupUrl = "{% url 'groups:join_group' pk=group.id %}";
</script>


<div class="flex mt-20 justify-around w-full">
    <div class="group-panel bg-primary1-800 p-5">
        <h1>GROUP NAME: {{ group.name }}</h1>
        <p>Created by: {{ group.creator.username }}</p>

        <h2 class="pt-4">Members:</h2>
        <div class="members-list">
            {% for member in members %}
                <div class="member">
                    <p>{{ member.username }}</p>
                </div>
            {% empty %}
                <div class="no-members">
                    <p>No members in this group yet.</p>
                </div>
            {% endfor %}
        </div>

        <div class="m-4">
            <p>collabs: </p>
            {% for collab in collabs %}
            <div class="member">
                <a href="{% url "collabs:collab" pk=collab.id %}"><p>{{ collab.title }}</p></a>
            </div>
        {% empty %}
            <div class="no-members">
                <p>No members in this group yet.</p>
            </div>
        {% endfor %}
        </div>
    </div>


    <div class="group bg-primary1-800 p-5">
        <button id="joinGroupButton" data-group-id="{{ group.id }}" class="p-4 bg-stone-600">Join Group</button>
        <div id="responseMessage"></div>
    </div>

    <div class="manage bg-contrast-700 bg-opacity-40 mx-5 p-5">
        <p>Manage Group:</p>

        <p>Membership Requests: {{ request_count }}</p>

        {% for request in requests %}
            <a href="{% url "groups:verify_member" pk=request.id %}"><button class="p-2 bg-slate-800">Verify: {{ request.user.username }}</button></a>
        {% endfor %}
    </div>
</div>


{% endblock %}